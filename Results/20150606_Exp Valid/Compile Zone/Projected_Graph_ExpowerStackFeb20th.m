clear all;

Blueish = [0 0.45 0.74];
Yellowish = [0.75 0.75 0];
Redish = [0.85 0.33 0.1];
Grey = [.5 .5 .5];

Turquoise = [0.301960796117783 0.745098054409027 0.933333337306976];
Purple = [0.494117647409439 0.184313729405403 0.556862771511078];
Grey = [0.7 0.7 0.7];


nthElement = 50;
markerSize = 100;


T_ref = 20; % (c)



figure('Color',[1 1 1]);
hold on;

% title({'\chi vs \epsilon','Measured Total Array'},...
%     'FontSize',18,...
%     'FontName','Arial Narrow');

xlabel(strcat('T_{HTF,in}',sprintf('(%cC)',char(176))),...
    'FontName','Arial Narrow',...
     'FontSize',22,...
    'FontWeight','bold');
set(gca,'XGrid','on',...
    'FontName','arial narrow',...
    'FontSize',18,...
    'FontWeight','bold');

ylabel('Exergy Efficiency',...
    'FontName','Arial Narrow',...
    'FontSize',26,...
    'FontWeight','bold');
set(gca,'YGrid','on',...
    'FontName','arial narrow',...
    'FontSize',18,...
    'FontWeight','bold');

axis([60 80 0 0.5]);


%% Plot Feb 20th

load('PROJECTED_ICSolar.ICS_Skeleton_20_Feb_2015_v7.mat',...
    'Start','End','day','GN_arrayTotal','Egen_arrayTotal',...
    'Ex_epsilon','Ex_arrayTotal','measured_T_HTFin');

% Modeled
Color = Grey;

% Modeled Extropaltated Ex Epsilon Array total 
% T_HTFin = [40 50 60 75 85];
% predict_eps = [0.1425 0.146 0.1477 0.146 0.1425];
% T_HTFin = [350-273 300-273 325-273 375-273];
% predict_eps = [0.1492 0.1414 .152 .1355];

% f=fit(T_HTFin',predict_eps','poly2');
% x=0:5:100;
% y=f(x);
% indexmax = find(max(y) == y);
% xmax = x(indexmax);
% ymax = y(indexmax);
% 
% plot(x,y,'LineStyle',':',...
%     'DisplayName','Extrapolated Modeled Results',...
%     'Color',Color,...
%     'LineWidth',3);

Color = Blueish;

%trimmed obseverd 
t_o_Tin = measured_T_HTFin(:,Start:End) - 273;

t_o_ep_Egen = Egen_arrayTotal(:,Start:End)./(.93*GN_arrayTotal(:,Start:End));
t_o_ep_Qgen = (Ex_arrayTotal(:,Start:End) - Egen_arrayTotal(:,Start:End))./(.93*GN_arrayTotal(:,Start:End));
t_o_epsilon = Ex_epsilon(:,Start:end);

x = t_o_ep_Egen +  t_o_ep_Qgen;

plot(t_o_Tin,t_o_epsilon,'LineWidth',2,...
    'Color',Purple);

plot(t_o_Tin,t_o_ep_Egen,'LineWidth',2,...
    'Color',Turquoise);

plot(t_o_Tin,t_o_ep_Qgen,'LineWidth',2,...
    'Color',[1 0 0]);


% errorbar(t_o_Tin(1:nthElement:end)',t_o_eta_Cgen(1:nthElement:end)',error_eta,...
%     'Marker','o',...
%     'MarkerSize',8,...
%     'LineStyle','none',...
%     'Color',Color,...
%     'MarkerFaceColor','w',...
%     'MarkerEdgeColor',Color,...
%     'DisplayName','20 Feb \eta');
% 
% errorbar(t_o_Tin(1:nthElement:end)',t_o_epsilon(1:nthElement:end)',error_ex,...
%     'Marker','o',...
%     'MarkerSize',8,...
%     'LineStyle','none',...
%     'Color',Color,....
%     'MarkerFaceColor',Color,...
%     'MarkerEdgeColor',Color,...
%     'DisplayName','20 Feb \epsilon');

% errorbar(t_o_Ts3m3in(1:nthElement:end)',t_o_epsilon_mod23(1:nthElement:end)',error_ex_mod23,...
%     'Marker','o',...
%     'MarkerSize',8,...
%     'LineStyle','none',...
%     'Color',Color,....
%     'MarkerFaceColor',Color,...
%     'MarkerEdgeColor',Color,...
%     'DisplayName','20 Feb \epsilon');
% 
% errorbar(t_o_Ts3m3in(1:nthElement:end)',t_o_eta_Cgen23(1:nthElement:end)',error_eta_mod23,...
%     'Marker','o',...
%     'MarkerSize',8,...
%     'LineStyle','none',...
%     'Color',Color,...
%     'MarkerFaceColor','w',...
%     'MarkerEdgeColor',Color,...
%     'DisplayName','20 Feb \eta');
% 
% errorbar(t_o_Tin(1:nthElement:end)',t_o_epsilon_mod6(1:nthElement:end)',error_ex_mod6,...
%     'Marker','o',...
%     'MarkerSize',8,...
%     'LineStyle','none',...
%     'Color',Color,....
%     'MarkerFaceColor',Color,...
%     'MarkerEdgeColor',Color,...
%     'DisplayName','20 Feb \epsilon');
% 
% errorbar(t_o_Tin(1:nthElement:end)',t_o_eta_Cgen6(1:nthElement:end)',error_eta_mod6,...
%     'Marker','o',...
%     'MarkerSize',8,...
%     'LineStyle','none',...
%     'Color',Color,...
%     'MarkerFaceColor','w',...
%     'MarkerEdgeColor',Color,...
%     'DisplayName','20 Feb \eta');



% scatter(t_o_Tin(1:nthElement:end)',t_o_eta(1:nthElement:end)',...
%     markerSize,'o',...
%     'MarkerFaceColor','w',...
%     'MarkerEdgeColor',Color,...
%     'DisplayName','20 Feb \eta');


% scatter(t_o_chi',t_o_epsilon_arrayTotal',...
%     'MarkerFaceColor',Color,...
%     'MarkerEdgeColor',Color,...
%     'DisplayName',strcat(...z
%     day,' \chi vs \epsilon'));

% x=0:.01:.2;
% y=f(x);

% plot(x,y,'LineStyle',':',...
%     'DisplayName',strcat(day, ' Linear Bestfit'),...
%     'Color',Color,...
%     'LineWidth',3);



